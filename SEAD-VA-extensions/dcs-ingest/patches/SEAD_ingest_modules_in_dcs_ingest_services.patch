Index: src/main/java/org/dataconservancy/dcs/ingest/services/util/CachedSipStager.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/org/dataconservancy/dcs/ingest/services/util/CachedSipStager.java	(revision 7fdb417c1ac66ba92592d5d6cd5b662378e0e7c6)
+++ src/main/java/org/dataconservancy/dcs/ingest/services/util/CachedSipStager.java	(revision )
@@ -67,7 +67,7 @@
 
     public void retire(String id) {
         if (cache.containsKey(id)) {
-            delegate.updateSIP((Dcp) cache.get(id), id);
+            delegate.updateSIP(cache.get(id), id);
             cache.remove(id);
         }
         delegate.retire(id);
@@ -114,7 +114,7 @@
 
         @Override
         protected boolean removeLRU(LinkEntry entry) {
-            delegate.updateSIP((Dcp) entry.getValue(), (String) entry.getKey());
+            delegate.updateSIP((Dcp)entry.getValue(), (String) entry.getKey());
             return true;
         }
     }
Index: src/main/java/org/dataconservancy/dcs/ingest/services/Finisher.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/org/dataconservancy/dcs/ingest/services/Finisher.java	(revision 7fdb417c1ac66ba92592d5d6cd5b662378e0e7c6)
+++ src/main/java/org/dataconservancy/dcs/ingest/services/Finisher.java	(revision )
@@ -37,6 +37,7 @@
 import org.dataconservancy.model.dcs.DcsEntity;
 import org.dataconservancy.model.dcs.DcsEntityReference;
 import org.dataconservancy.model.dcs.DcsEvent;
+import org.seadva.model.pack.ResearchObject;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 import org.springframework.beans.factory.annotation.Required;
@@ -149,9 +150,9 @@
 
     public void execute(String sipRef) {
         if (isDisabled()) return;
-        Dcp dcp = ingest.getSipStager().getSIP(sipRef);
+        ResearchObject dcp = (ResearchObject)ingest.getSipStager().getSIP(sipRef);
 
-        if (verifyArchiveEntities) {
+       /* if (verifyArchiveEntities) {
             checkArchive(dcp);
         }
 
@@ -162,10 +163,10 @@
             }
             checkIndex(dcp);
         }
-
+*/
         addSuccessEvent(sipRef, dcp);
 
-        dcp = ingest.getSipStager().getSIP(sipRef);
+        dcp = (ResearchObject)ingest.getSipStager().getSIP(sipRef);
 
         for (DcsEvent e : dcp.getEvents()) {
             if (Events.INGEST_SUCCESS.equals(e.getEventType())) {
@@ -244,7 +245,7 @@
     }
 
     private void archiveEvent(DcsEvent e) {
-        Dcp dcp = new Dcp();
+        ResearchObject dcp = new ResearchObject();
         dcp.addEvent(e);
 
         ByteArrayOutputStream out = new ByteArrayOutputStream();
Index: src/main/java/org/dataconservancy/dcs/ingest/services/Labeller.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/org/dataconservancy/dcs/ingest/services/Labeller.java	(revision 7fdb417c1ac66ba92592d5d6cd5b662378e0e7c6)
+++ src/main/java/org/dataconservancy/dcs/ingest/services/Labeller.java	(revision )
@@ -44,6 +44,8 @@
 import org.dataconservancy.model.dcs.DcsManifestationFile;
 import org.dataconservancy.model.dcs.DcsMetadataRef;
 import org.dataconservancy.model.dcs.DcsRelation;
+import org.seadva.model.SeadDeliverableUnit;
+import org.seadva.model.pack.ResearchObject;
 import org.springframework.beans.factory.annotation.Required;
 
 /**
@@ -137,7 +139,7 @@
 
         /* Update internal references, and save */
         sip = updateReferences(ingest.getSipStager().getSIP(sipRef), idMap);
-        ingest.getSipStager().updateSIP(sip, sipRef);
+        ingest.getSipStager().updateSIP((ResearchObject)sip, sipRef);
 
     }
 
Index: src/main/java/org/dataconservancy/dcs/ingest/services/util/QueryServiceSipStager.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/org/dataconservancy/dcs/ingest/services/util/QueryServiceSipStager.java	(revision 7fdb417c1ac66ba92592d5d6cd5b662378e0e7c6)
+++ src/main/java/org/dataconservancy/dcs/ingest/services/util/QueryServiceSipStager.java	(revision )
@@ -30,6 +30,7 @@
 import org.dataconservancy.model.dcs.DcsEvent;
 import org.dataconservancy.model.dcs.DcsFile;
 import org.dataconservancy.model.dcs.DcsManifestation;
+import org.seadva.model.pack.ResearchObject;
 import org.springframework.beans.factory.annotation.Required;
 
 import static org.dataconservancy.dcs.index.solr.support.SolrQueryUtil.createLiteralQuery;
@@ -88,7 +89,7 @@
                 return null; /* no results */
             }
 
-            Dcp result = new Dcp();
+            ResearchObject result = new ResearchObject();
 
             for (QueryMatch<DcsEntity> m : matches.getMatches()) {
                 DcsEntity entity = m.getObject();
Index: src/main/java/org/dataconservancy/dcs/ingest/services/ExternalContentStager.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/org/dataconservancy/dcs/ingest/services/ExternalContentStager.java	(revision 7fdb417c1ac66ba92592d5d6cd5b662378e0e7c6)
+++ src/main/java/org/dataconservancy/dcs/ingest/services/ExternalContentStager.java	(revision )
@@ -21,6 +21,7 @@
 import java.net.MalformedURLException;
 import java.net.URL;
 
+import java.net.URLConnection;
 import java.security.MessageDigest;
 import java.security.NoSuchAlgorithmException;
 
@@ -45,8 +46,10 @@
 import org.dataconservancy.model.dcs.DcsEvent;
 import org.dataconservancy.model.dcs.DcsFile;
 import org.dataconservancy.model.dcs.DcsFixity;
+import org.seadva.model.pack.ResearchObject;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
+import org.springframework.beans.factory.annotation.Required;
 
 /**
  * Retrieves and stages extant content included by reference.
@@ -76,11 +79,24 @@
             LoggerFactory.getLogger(ExternalContentStager.class);
 
     private String[] calculateFixity;
+    private String acrUser, acrPassword;
 
     public void setAlwaysCalculateFixityFor(String... algorithms) {
         calculateFixity = algorithms;
     }
 
+    @Required
+    public void setAcrUser(String user)
+    {
+        this.acrUser = user;
+    }
+
+    @Required
+    public void setAcrPassword(String pwd)
+    {
+        this.acrPassword = pwd;
+    }
+
     public void execute(String sipRef) throws IngestServiceException {
         if (isDisabled()) return;
         FileContentStager fileStager = ingest.getFileContentStager();
@@ -98,7 +114,7 @@
 
         if (modified) {
             sip.setFiles(files);
-            ingest.getSipStager().updateSIP(sip, sipRef);
+            ingest.getSipStager().updateSIP((ResearchObject)sip, sipRef);
         }
     }
 
@@ -125,7 +141,20 @@
         InputStream stream = null;
         StagedFile staged = null;
         try {
-            stream = fixityFilter(fileUrl.openStream(), metadata, eventsToAdd);
+            InputStream src = null;
+            if(file.getSource().contains("file:"))
+                src = fileUrl.openStream();
+            else if (file.getSource().contains("http:"))
+            {
+                String loginPassword = this.acrUser+ ":" + this.acrPassword;
+                String encoded = new sun.misc.BASE64Encoder().encode (loginPassword.getBytes());
+                URLConnection conn = fileUrl.openConnection();
+                conn.setConnectTimeout(15*1000);
+                conn.setReadTimeout(15*1000);
+                conn.setRequestProperty ("Authorization", "Basic " + encoded);
+                src = conn.getInputStream();
+            }
+            stream = fixityFilter(src, metadata, eventsToAdd);
             staged = ingest.getFileContentStager().add(stream, metadata);
             file.setSource(staged.getReferenceURI());
         } catch (IOException e) {
@@ -177,7 +206,7 @@
             fixity.setValue(outcome[1]);
             fileEntity.addFixity(fixity);
         }
-        ingest.getSipStager().updateSIP(stagedSip, sipRef);
+        ingest.getSipStager().updateSIP((ResearchObject)stagedSip, sipRef);
 
         /*
          * Set the staged content file as the target for all events, and add
Index: pom.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- pom.xml	(revision 7fdb417c1ac66ba92592d5d6cd5b662378e0e7c6)
+++ pom.xml	(revision )
@@ -21,6 +21,7 @@
   <name>Ingest services</name>
   <description>Individual services for processing ingested content</description>
   <packaging>jar</packaging>
+    <version>1.1.1-SNAPSHOT</version>
 
   <parent>
     <artifactId>dcs-ingest</artifactId>
@@ -104,10 +105,22 @@
     <dependency>
       <groupId>org.dataconservancy.dcs</groupId>
       <artifactId>dcs-virus-scanning</artifactId>
+      <version>1.1.0-SNAPSHOT</version>
+    </dependency>
+
+      <dependency>
+          <groupId>org.seadva.model</groupId>
+          <artifactId>sead-model</artifactId>
+          <version>1.1.0-SNAPSHOT</version>
+      </dependency>
+
+      <dependency>
+          <groupId>org.seadva.model</groupId>
+          <artifactId>sead-model-builder-xstream</artifactId>
-      <version>1.1.0-SNAPSHOT</version>
-    </dependency>
+          <version>1.1.0-SNAPSHOT</version>
+      </dependency>
 
-    <dependency>
+      <dependency>
       <groupId>org.springframework</groupId>
       <artifactId>spring-beans</artifactId>
       <scope>provided</scope>
Index: src/main/java/org/dataconservancy/dcs/ingest/services/SimpleMimeCharacterizer.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/org/dataconservancy/dcs/ingest/services/SimpleMimeCharacterizer.java	(revision 7fdb417c1ac66ba92592d5d6cd5b662378e0e7c6)
+++ src/main/java/org/dataconservancy/dcs/ingest/services/SimpleMimeCharacterizer.java	(revision )
@@ -15,6 +15,7 @@
  */
 package org.dataconservancy.dcs.ingest.services;
 
+import java.io.File;
 import java.io.IOException;
 import java.io.InputStream;
 
@@ -69,7 +70,7 @@
 
     public void execute(String sipRef) throws IngestServiceException {
         if (isDisabled()) return;
-        
+
         Dcp sip = ingest.getSipStager().getSIP(sipRef);
         Set<DcsFile> files = new HashSet<DcsFile>();
         List<DcsEvent> events = new ArrayList<DcsEvent>();
@@ -93,6 +94,11 @@
                 modified = true;
             }
 
+            File filePath = new File(file.getSource().replace("file://",""));
+            long length = filePath.length();
+            file.setSizeBytes(length);
+
+            modified = true;
             files.add(file);
         }
 
